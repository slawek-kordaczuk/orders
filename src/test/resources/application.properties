# Enable Dev Services for tests
%test.quarkus.devservices.enabled=true

%test.quarkus.datasource.db-kind=postgresql
%test.quarkus.datasource.devservices.enabled=true
%test.quarkus.datasource.devservices.image-name=postgres:15
%test.quarkus.datasource.devservices.port=5433
%test.quarkus.datasource.devservices.shared=true
%test.quarkus.datasource.devservices.service-name=orders-postgres

%test.quarkus.datasource.username=quarkus
%test.quarkus.datasource.password=quarkus
%test.quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5433/quarkus

%test.quarkus.liquibase.migrate-at-start=true
%test.quarkus.liquibase.clean-at-start=true
%test.quarkus.liquibase.contexts=test

%test.quarkus.kafka.devservices.enabled=true
%test.quarkus.kafka.devservices.image-name=redpandadata/redpanda:latest
%test.quarkus.kafka.devservices.shared=true
%test.quarkus.kafka.devservices.service-name=orders-kafka

# For test configuration
%test.mp.messaging.incoming.reserved.connector=smallrye-kafka
%test.mp.messaging.incoming.reserved.topic=test-item-reserved
%test.mp.messaging.incoming.reserved.group.id=order-service-test
%test.mp.messaging.incoming.reserved.value.deserializer=com.slimczes.orders.conf.JsonDeserializer
%test.mp.messaging.incoming.reserved.value.type=com.slimczes.orders.adapter.messaging.event.ItemsReserved
%test.mp.messaging.incoming.reserved.key.deserializer=org.apache.kafka.common.serialization.StringDeserializer

%test.mp.messaging.incoming.reserved-failed.connector=smallrye-kafka
%test.mp.messaging.incoming.reserved-failed.topic=test-item-reserved-failed
%test.mp.messaging.incoming.reserved-failed.group.id=order-service-test
%test.mp.messaging.incoming.reserved-failed.value.deserializer=com.slimczes.orders.conf.JsonDeserializer
%test.mp.messaging.incoming.reserved-failed.value.type=com.slimczes.orders.adapter.messaging.event.ItemReservationFailed
%test.mp.messaging.incoming.reserved-failed.key.deserializer=org.apache.kafka.common.serialization.StringDeserializer

%test.mp.messaging.outgoing.reservations.connector=smallrye-kafka
%test.mp.messaging.outgoing.reservations.topic=test-item-reservation
%test.mp.messaging.outgoing.reservations.value.serializer=com.slimczes.orders.conf.JsonSerializer

%test.mp.messaging.outgoing.reservations-cancelled.connector=smallrye-kafka
%test.mp.messaging.outgoing.reservations-cancelled.topic=test-item-reservation-cancelled
%test.mp.messaging.outgoing.reservations-cancelled.value.serializer=com.slimczes.orders.conf.JsonSerializer
